<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Topics</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/manage_topics.css') }}">
</head>
<body>

<h2>Manage Topics</h2>
<button onclick="window.location.href='/'">Back to Home</button>

<h3>Create New Topic</h3>
<label for="new-index-name">Topic Name (lowercase letters, numbers, and '-')</label>
<input type="text" id="new-index-name" placeholder="Enter new topic name" oninput="validateTopicName()">
<p id="name-error" style="color: red; display: none;">Invalid name! Only lowercase letters, numbers, and '-' are allowed.</p>

<label for="new-index-description">Description</label>
<textarea id="new-index-description" placeholder="Enter description"></textarea>
<button onclick="createTopic()">Create</button>

<h3>Existing Topics</h3>
<label for="existing-index-select">Select Index:</label>
<select id="existing-index-select" onchange="fetchDescription(); listUploadedFiles();">
    <option value="" disabled selected>Select a topic...</option>
</select>

<h4>Topic Description</h4>
<textarea id="edit-description" placeholder="Description will appear here" disabled></textarea>
<button id="update-button" onclick="updateDescription()" disabled>Update</button>

<h4>Upload Document</h4>
<div class="file-upload-container">
    <input type="file" id="file-input">
    <button onclick="uploadDocument()">Upload</button>
</div>

<!-- ðŸ†• Image Description input (only shown for image uploads) -->
<div id="image-description-container" style="display:none; margin-top: 10px;">
    <label for="image-description">Image Description</label>
    <textarea id="image-description" placeholder="Enter image description"></textarea>
</div>

<h4>View, Embed, and Delete Files</h4>
<ul id="file-list"></ul>

<label for="chunk-size">Chunk Size (# of tokens):</label>
<input type="number" id="chunk-size" placeholder="Chunk size (default: 500)" value="500">

<div style="margin-top: 10px;">
    <button onclick="embedSelectedFiles()">Embed Selected</button>
    <button onclick="unembedSelectedFiles()">Unembed Selected</button>
    <button onclick="deleteSelectedFiles()">Delete Selected</button>
</div>

<h4>Delete Topic</h4>
<button onclick="deleteTopic()">Delete Selected Topic</button>

<script src="{{ url_for('static', filename='js/manage_topics.js') }}"></script>
</body>
</html>
